[{"id":"8fd4e6f5.2b5","type":"tab","label":"–ü–æ—Ç–æ–∫ 1","disabled":false,"info":""},{"id":"7e953954.fcb5d8","type":"subflow","name":"—à–ª–∏—Ç–µ –µ—â–µ —á–µ–∫–∏","info":"","category":"","in":[{"x":40,"y":80,"wires":[{"id":"289e7379.c67234"}]}],"out":[{"x":640,"y":80,"wires":[{"id":"1605efdb.8d836","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"c8291d3.ad832e","type":"subflow","name":"QR –¥–µ–∫–æ–¥–µ—Ä","info":"","category":"","in":[{"x":20,"y":240,"wires":[{"id":"ddb09871.3d116"},{"id":"2cbdb6bd.ff8942"}]}],"out":[{"x":1080,"y":240,"wires":[{"id":"f8738091.a97758","port":0}]},{"x":1080,"y":360,"wires":[{"id":"b229d4ef.393f9","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"a4b0c40a.f96458","type":"telegram bot","botname":"germes_pogoda_bot","usernames":"","chatids":"","baseapiurl":"","updatemode":"polling","pollinterval":"600","usesocks":false,"sockshost":"","socksport":"6667","socksusername":"anonymous","sockspassword":"","bothost":"","botpath":"","localbotport":"8443","publicbotport":"8443","privatekey":"","certificate":"","useselfsignedcertificate":false,"sslterminated":false,"verboselogging":false},{"id":"20f778b0.3b0388","type":"chatbot-telegram-node","botname":"germes_pogoda_bot","usernames":"","providerToken":"","polling":"1000","store":"","log":"","debug":false,"webHook":"","connectMode":"polling"},{"id":"d086776c.7de82","type":"telegram bot","botname":"HeinzBot","usernames":"","chatids":"","baseapiurl":"","updatemode":"polling","pollinterval":"300","usesocks":false,"sockshost":"","socksport":"6667","socksusername":"anonymous","sockspassword":"","bothost":"","localbotport":"8443","publicbotport":"8443","privatekey":"","certificate":"","useselfsignedcertificate":false,"sslterminated":false,"verboselogging":false},{"id":"d91aa191.85592","type":"chatbot-telegram-receive","z":"8fd4e6f5.2b5","bot":"20f778b0.3b0388","botProduction":"","x":90,"y":360,"wires":[["c9f6a457.f1d83"]]},{"id":"3d826acf.deefde","type":"chatbot-telegram-send","z":"8fd4e6f5.2b5","bot":"20f778b0.3b0388","botProduction":"","track":false,"passThrough":false,"errorOutput":false,"outputs":0,"x":1910,"y":540,"wires":[]},{"id":"c9f6a457.f1d83","type":"chatbot-rules","z":"8fd4e6f5.2b5","name":"","rules":[{"type":"command","command":"/start"},{"type":"command","command":"/attach_check"},{"type":"command","command":"/howto"},{"type":"messageType","messageType":"photo"},{"type":"command","command":"/my_receipts"},{"type":"catchAll"}],"outputs":6,"x":150,"y":500,"wires":[["77e2ce.f1ad4d34","d4df95f7.9da3f8"],["d1a0f985.24c358"],["e5178e10.fd53a8"],["68405a2c.30ab94","74181af2.0b2134"],["ed4d7bf7.e5635","4ae274e0.46cefc"],["b80807df.9ac2c8"]]},{"id":"521b8475.7f43c4","type":"chatbot-inline-buttons","z":"8fd4e6f5.2b5","name":"–ø—Ä–∏–≤–µ—Å—Ç–≤–∏–µ","buttons":[{"type":"postback","label":"–ü–æ—Å–ª–∞—Ç—å —á–µ–∫","value":"/attach_check","answer":"","alert":false,"style":""}],"message":"–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!\n–ü–æ–∫—É–ø–∞–π—Ç–µ –ø—Ä–æ–¥—É–∫—Ü–∏—é \"–¢–æ—Ç–∞–ª—å–Ω–∞—è –î–µ—Ä–µ–≤–Ω—è\" –∏ –≤—ã–∏–≥—Ä—ã–≤–∞–π—Ç–µ –ø—Ä–∏–∑—ã! \nüéÅ üéÅ üéÅ\n\n–ë–ª–∏–∂–∞–π—à–∏–π —Ä–æ–∑—ã–≥—Ä—ã—à—å –±—É–¥–µ—Ç 21 –∞–ø—Ä–µ–ª—è.\n–†–∞–∑—ã–≥—Ä—ã–≤–∞–µ—Ç—Å—è –í–∞–≥–æ–Ω –Ø–±–ª–æ–∫.\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ø—Ä–∞–≤–∏–ª–∞—Ö –∫–æ–Ω–∫—É—Ä—Å–∞: http://gmail.com\n\n–ß—Ç–æ–±—ã —É—á–∞—Å—Ç–æ–≤–∞—Ç—å –≤ —Ä–æ–∑—ã–≥—Ä—ã—à–µ,\n–ø—Ä–∏—à–ª–∏—Ç–µ —á–µ–∫ üßæ –≤ –∫–æ—Ç–æ—Ä–æ–º –µ—Å—Ç—å –ø—Ä–æ–¥—É–∫—Ç—ã –¢–æ—Ç–∞–ª—å–Ω–∞—è –î–µ—Ä–µ–≤–Ω—è.","x":610,"y":120,"wires":[["cda83f81.eb5fd8"]]},{"id":"e5178e10.fd53a8","type":"chatbot-message","z":"8fd4e6f5.2b5","name":"–∫–∞–∫ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞—Ç—å","message":[{"message":"–õ—É—á—à–µ –≤—Å–µ–≥–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è, –µ—Å–ª–∏:\n- —á–µ–∫ —Ö–æ—Ä–æ—à–æ –æ—Å–≤–µ—â–µ–Ω\n- –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ —Å–º–∞–∑–∞–Ω–Ω–æ–µ\n- QR –∫–æ–¥ –≤–∏–¥–µ–Ω —Ü–µ–ª–∏–∫–æ–º\n\n–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—é–¥–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é —á–µ–∫–∞."}],"language":"none","x":480,"y":300,"wires":[["cda83f81.eb5fd8"]]},{"id":"f7f28b36.fcd4f","type":"delay","z":"8fd4e6f5.2b5","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":960,"y":500,"wires":[["929ffdae.426808"]]},{"id":"ed4d7bf7.e5635","type":"chatbot-message","z":"8fd4e6f5.2b5","name":"–º–æ–∏ –ø–æ–∫—É–ø–∫–∏ + –∫–æ—Ä–æ—Ç–∫–∞—è –∏–Ω—Ñ–∞ –æ –±–ª–∏–∂–∞–π—à–µ–º —Ä–æ–∑—ã–≥—Ä—ã—à–µ","message":[{"message":"–í–∞—à–∏ –ø–æ–∫—É–ø–∫–∏\n\n–ß–µ–∫ N33333 –æ—Ç 21 –∞–ø—Ä–µ–ª—è 2021 23:45:\n- –¢–æ–º–∞—Ç–Ω–∞—è –ª–∞–ø—à–∞ –¢–æ—Ç–∞–ª—å–Ω–∞—è –¥–µ—Ä–µ–≤–Ω—è ‚Äî 2 —à—Ç—É–∫–∏.\n- –ë–∞–Ω–∞–Ω—ã –≥–∏–≥–∞–Ω—Ç—Å–∫–∏–µ ‚Äî 2 –∫–≥.\n\n–í—Å–µ —ç—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç—ã —É—á–∞—Å—Ç–≤—É—é—Ç –≤ —Ä–æ–∑—ã–≥—Ä—ã—à–µ \"–í–∞–≥–æ–Ω –Ø–±–ª–æ–∫\" –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç 23 –∞–ø—Ä–µ–ª—è."}],"language":"none","x":850,"y":760,"wires":[["a55eadd9.201f2"]]},{"id":"ff52bc66.f63a18","type":"function","z":"8fd4e6f5.2b5","name":"–¥–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–≤–∏–∞—Ç—É—Ä—É  –ü–æ—Å–ª–∞—Ç—å —á–µ–∫","func":"msg.payload.type = \"buttons\"\nmsg.payload.buttons = [\n    {type: 'keyboardButton', label: '–ü–æ—Å–ª–∞—Ç—å —á–µ–∫'}\n  ]\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1560,"y":60,"wires":[[]]},{"id":"b80807df.9ac2c8","type":"switch","z":"8fd4e6f5.2b5","name":"","property":"payload.content","propertyType":"msg","rules":[{"t":"cont","v":"–ü–æ—Å–ª–∞—Ç—å —á–µ–∫","vt":"str"},{"t":"cont","v":"–ù–∞—á–∞—Ç—å –†–æ–∑—ã–≥—Ä—ã—à","vt":"str"},{"t":"cont","v":"–†–æ–∑—ã–≥—Ä—ã—à, –≤—ã –ø–æ–±–µ–¥–∏–ª–∏","vt":"str"}],"checkall":"false","repair":false,"outputs":3,"x":370,"y":900,"wires":[[],["26221f4d.66ee5"],["9be92f05.77418","b9f0c80f.ce8e68"]]},{"id":"289e7379.c67234","type":"delay","z":"7e953954.fcb5d8","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":190,"y":80,"wires":[["1605efdb.8d836"]]},{"id":"1605efdb.8d836","type":"chatbot-inline-buttons","z":"7e953954.fcb5d8","name":"—à–ª–∏—Ç–µ –µ—â–µ —á–µ–∫–∏","buttons":[{"type":"postback","label":"–ü–æ—Å–ª–∞—Ç—å —á–µ–∫","value":"/attach_check","answer":"","alert":false,"style":""}],"message":"–ß–µ–º –±–æ–ª—å—à–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¢–æ—Ç–∞–ª—å–Ω–∞—è –î–µ—Ä–µ–≤–Ω—è –≤—ã –ø–æ–∫—É–ø–∞–µ—Ç–µ,\n—Ç–µ–º –±–æ–ª—å—à–µ —É –≤–∞—Å —à–∞–Ω—Å–æ–≤ –≤—ã–π–≥—Ä–∞—Ç—å –ø—Ä–∏–∑.\n\n–ñ–¥–µ–º –µ—â—ë —á–µ–∫–∏.","x":470,"y":80,"wires":[[]]},{"id":"e5fd921d.7769a8","type":"subflow:7e953954.fcb5d8","z":"8fd4e6f5.2b5","name":"","env":[],"x":1410,"y":580,"wires":[["3d826acf.deefde"]]},{"id":"4ae274e0.46cefc","type":"subflow:7e953954.fcb5d8","z":"8fd4e6f5.2b5","name":"","env":[],"x":730,"y":820,"wires":[["a55eadd9.201f2"]]},{"id":"e90d4f4c.f5da","type":"chatbot-message","z":"8fd4e6f5.2b5","name":"QR –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω Try again","message":[{"message":"üòû –ù–∞—à–µ–º—É —Ä–æ–±–æ—Ç—É –Ω–µ —É–¥–∞–ª–æ—Å—å —É–≤–∏–¥–µ—Ç—å QR-–∫–æ–¥ –Ω–∞ —á–µ–∫–µ. \n\nüì∑ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞—Ç—å —á–µ–∫ –µ—â–µ —Ä–∞–∑.\n\n–õ—É—á—à–µ –≤—Å–µ–≥–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è, –µ—Å–ª–∏:\n- QR –∫–æ–¥ –≤–∏–¥–µ–Ω —Ü–µ–ª–∏–∫–æ–º\n- —á–µ–∫ —Ö–æ—Ä–æ—à–æ –æ—Å–≤–µ—â–µ–Ω\n- –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ —Å–º–∞–∑–∞–Ω–Ω–æ–µ\n\nüìé –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—é–¥–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é —á–µ–∫–∞. "}],"language":"none","x":1420,"y":640,"wires":[["3d826acf.deefde"]]},{"id":"929ffdae.426808","type":"function","z":"8fd4e6f5.2b5","name":"random","func":"const min = 0\nconst max = 1;\n\nrnd = Math.floor(Math.random() * (max - min + 1)) + min;\n\nif( rnd == 0)\n    return [msg, null];\n\nif( rnd == 1)\n    return [null, msg];","outputs":2,"noerr":0,"initialize":"","finalize":"","x":1160,"y":500,"wires":[["6bd5a293.f917b4"],["e5fd921d.7769a8","182a2a14.53a086"]]},{"id":"6bd5a293.f917b4","type":"chatbot-inline-buttons","z":"8fd4e6f5.2b5","name":"–Ω–µ—Ç –Ω—É–∂–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤","buttons":[{"type":"postback","label":"–ü–æ—Å–ª–∞—Ç—å —á–µ–∫","value":"/attach_check","answer":"","alert":false,"style":""}],"message":"‚òπÔ∏è –ü–æ—Ö–æ–∂–µ, –≤ —ç—Ç–æ–º —á–µ–∫–µ –Ω–µ—Ç –Ω—É–∂–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤.\n\n–í –∞–∫—Ü–∏–∏ —É—á–∞–≤—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ü–∏—è –¢–æ—Ç–∞–ª—å–Ω–∞—è –¥–µ—Ä–µ–≤–Ω—è.\n\n–ñ–¥–µ–º –Ω–æ–≤—ã—Ö —á–µ–∫–æ–≤.","x":1430,"y":460,"wires":[["3d826acf.deefde"]]},{"id":"77e2ce.f1ad4d34","type":"chatbot-image","z":"8fd4e6f5.2b5","name":"–∑–∞—Å—Ç–∞–≤–∫–∞","filename":"","image":"/data/static/total_village_min.png","caption":"","x":380,"y":80,"wires":[["cda83f81.eb5fd8"]]},{"id":"d4df95f7.9da3f8","type":"delay","z":"8fd4e6f5.2b5","name":"","pauseType":"delay","timeout":"1500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":410,"y":120,"wires":[["521b8475.7f43c4"]]},{"id":"6a99256f.88e1a4","type":"chatbot-message","z":"8fd4e6f5.2b5","name":"–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–∑","message":[{"message":"–°–µ–π—á–∞—Å —Å –≤–∞–º–∏ —Å–≤—è–∂–µ—Ç—Å—è –Ω–∞—à –æ–ø–µ—Ä–∞—Ç–æ—Ä, —á—Ç–æ–±—ã —Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É –ø—Ä–∏–∑–∞.\n–ï–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç @total_hamlet_operator"}],"language":"none","x":810,"y":1000,"wires":[["a55eadd9.201f2"]]},{"id":"9be92f05.77418","type":"delay","z":"8fd4e6f5.2b5","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":610,"y":1000,"wires":[["6a99256f.88e1a4"]]},{"id":"a55eadd9.201f2","type":"chatbot-telegram-send","z":"8fd4e6f5.2b5","bot":"20f778b0.3b0388","botProduction":"","track":false,"passThrough":false,"errorOutput":false,"outputs":0,"x":1210,"y":820,"wires":[]},{"id":"9caea2e9.6c03b8","type":"function","z":"8fd4e6f5.2b5","name":"–¥–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–≤–∏–∞—Ç—É—Ä—É  –†–æ–∑—ã–≥—Ä—ã—à","func":"msg.payload.type = \"buttons\"\nmsg.payload.buttons = [\n    {type: 'keyboardButton', label: '–ù–∞—á–∞—Ç—å –†–æ–∑—ã–≥—Ä—ã—à'},\n    {type: 'keyboardButton', label: '–†–æ–∑—ã–≥—Ä—ã—à, –≤—ã –ø–æ–±–µ–¥–∏–ª–∏'},\n  ]\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1580,"y":140,"wires":[[]]},{"id":"26221f4d.66ee5","type":"chatbot-ask","z":"8fd4e6f5.2b5","name":"–ü—Ä–æ—à–µ–ª —Ä–æ–∑—ã–≥—Ä—ã—à + —Å–±—Ä–æ—Å –∞–¥–º–∏–Ω–∫–∏","buttons":[],"message":"üé≤ –°–µ–≥–æ–¥–Ω—è 21 –∞–ø—Ä–µ–ª—è –≤ 17:40 –ø—Ä–æ—à–µ–ª —Ä–æ–∑—ã–≥—Ä—ã—à –í–∞–≥–æ–Ω–∞ –Ø–±–ª–æ–∫.\n\n–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π:\n+7 916 ***-**-23\n+7 926 ***-**-12\n+7 985 ***-**-11\n\n–ö–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö –ø–æ–ª—É—á–∞–µ—Ç –í–∞–≥–æ–Ω –Ø–±–ª–æ–∫!\nüéÅ üéÅ üéÅ\n","x":790,"y":860,"wires":[["a55eadd9.201f2"]]},{"id":"b9f0c80f.ce8e68","type":"chatbot-ask","z":"8fd4e6f5.2b5","name":"–í—ã –≤—ã–π–≥—Ä–∞–ª–∏! + —Å–±—Ä–æ—Å –∞–¥–º–∏–Ω–∫–∏","buttons":[],"message":"üé≤ –°–µ–≥–æ–¥–Ω—è 21 –∞–ø—Ä–µ–ª—è –≤ 17:40 –ø—Ä–æ—à–µ–ª —Ä–æ–∑—ã–≥—Ä—ã—à –í–∞–≥–æ–Ω–∞ –Ø–±–ª–æ–∫.\n\n–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π:\n+7 916 ***-**-23\n+7 926 ***-**-12\n+7 985 ***-**-11\n\n–í—ã –≤—ã–π–≥—Ä–∞–ª–∏ –í–∞–≥–æ–Ω –Ø–±–ª–æ–∫!\nüéÅ üéÅ üéÅ","x":770,"y":920,"wires":[["a55eadd9.201f2"]]},{"id":"182a2a14.53a086","type":"chatbot-ask","z":"8fd4e6f5.2b5","name":"–ß–µ–∫ –ø—Ä–∏–Ω—è—Ç +  –ê–¥–º–∏–Ω–∫–∞ —Ä–æ–∑—ã–≥—Ä—ã—à–∞","buttons":[{"type":"keyboardButton","label":"–ù–∞—á–∞—Ç—å –†–æ–∑—ã–≥—Ä—ã—à"},{"type":"keyboardButton","label":"–†–æ–∑—ã–≥—Ä—ã—à, –≤—ã –ø–æ–±–µ–¥–∏–ª–∏"}],"message":"üëç –ú—ã –ø—Ä–æ–≤–µ—Ä–∏–ª–∏ –≤–∞—à —á–µ–∫ –æ—Ç 21 —è–Ω–≤–∞—Ä—è 2021\n–∏ –Ω–∞—à–ª–∏ 2 –ø—Ä–æ–¥—É–∫—Ç–∞ –±—Ä–µ–Ω–¥–∞ –¢–æ—Ç–∞–ª—å–Ω–∞—è –î–µ—Ä–µ–≤–Ω—è.\n\n–¢–µ–ø–µ—Ä—å 2 –ø—Ä–æ–¥—É–∫—Ç–∞ –∏–∑ 2 —á–µ–∫–æ–≤ —É—á–∞–≤—Å—Ç–≤—É—é—Ç –≤ —Ä–æ–∑—ã–≥—Ä—ã—à–µ \"–í–∞–≥–æ–Ω –Ø–±–ª–æ–∫\" 23 –∞–ø—Ä–µ–ª—è.\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –≤—Å–µ—Ö –≤–∞—à–∏—Ö —á–µ–∫–∞—Ö: /my_receipts","x":1460,"y":520,"wires":[["3d826acf.deefde"]]},{"id":"d1a0f985.24c358","type":"chatbot-ask","z":"8fd4e6f5.2b5","name":"\"–ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —á–µ–∫\" + –ê–¥–º–∏–Ω–∫–∞ \"–ø–æ—Å–ª–∞—Ç—å —á–µ–∫\"","buttons":[{"type":"keyboardButton","label":"–ü–æ—Å–ª–∞—Ç—å —á–µ–∫"}],"message":"üì∑ –°—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä—É–π—Ç–µ —á–µ–∫. \n\n–ù–∞ –Ω–µ–º –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ö–æ—Ä–æ—à–æ –≤–∏–¥–µ–Ω QR-–∫–æ–¥.\n\n–õ—É—á—à–µ –≤—Å–µ–≥–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è, –µ—Å–ª–∏:\n- —á–µ–∫ —Ö–æ—Ä–æ—à–æ –æ—Å–≤–µ—â–µ–Ω\n- –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ —Å–º–∞–∑–∞–Ω–Ω–æ–µ\n\nüìé –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—é–¥–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é —á–µ–∫–∞. ","x":490,"y":180,"wires":[["cda83f81.eb5fd8"]]},{"id":"e0f09a91.060498","type":"Barcode Decoder","z":"8fd4e6f5.2b5","name":"","data":"payload","dataType":"msg","tryharder":"true","tryharderType":"bool","QR_CODE":true,"DATA_MATRIX":false,"PDF_417":false,"EAN_8":false,"EAN_13":false,"CODE_39":false,"CODE_128":false,"ITF":false,"RSS_14":false,"x":1610,"y":1300,"wires":[["ffd84bc3.df75f8"]]},{"id":"ffd84bc3.df75f8","type":"debug","z":"8fd4e6f5.2b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1790,"y":1300,"wires":[]},{"id":"2779db08.3f7d3c","type":"inject","z":"8fd4e6f5.2b5","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":760,"y":1300,"wires":[["92d54baf.941a4"]]},{"id":"92d54baf.941a4","type":"jimp-image","z":"8fd4e6f5.2b5","name":"","data":"/data/static/check2.jpg","dataType":"str","ret":"img","parameter1":"[{\"name\": \"grayscale\"},{\"name\":\"normalize\"},{\"name\":\"blur\",\"parameters\":[3]}]","parameter1Type":"json","parameter2":"RESIZE_BICUBIC","parameter2Type":"Jimp","parameter3":"","parameter3Type":"","parameter4":"","parameter4Type":"","parameter5":"","parameter5Type":"","parameter6":"","parameter6Type":"","parameter7":"","parameter7Type":"","parameter8":"","parameter8Type":"","sendProperty":"payload","parameterCount":0,"jimpFunction":"none","selectedJimpFunction":{"name":"none","fn":"none","description":"Just loads the image.","parameters":[]},"x":930,"y":1300,"wires":[["36bdb905.1ff99e"]],"icon":"font-awesome/fa-image"},{"id":"36bdb905.1ff99e","type":"jimp-image","z":"8fd4e6f5.2b5","name":"","data":"payload","dataType":"msg","ret":"img","parameter1":"","parameter1Type":"msg","parameter2":"","parameter2Type":"msg","parameter3":"","parameter3Type":"msg","parameter4":"","parameter4Type":"msg","parameter5":"","parameter5Type":"msg","parameter6":"","parameter6Type":"msg","parameter7":"","parameter7Type":"msg","parameter8":"","parameter8Type":"msg","sendProperty":"payload","sendPropertyType":"msg","parameterCount":0,"jimpFunction":"greyscale","selectedJimpFunction":{"name":"greyscale","fn":"greyscale","description":"remove colour from the image","parameters":[]},"x":1080,"y":1300,"wires":[["e86b6b17.94b4a"]]},{"id":"e86b6b17.94b4a","type":"jimp-image","z":"8fd4e6f5.2b5","name":"","data":"payload","dataType":"msg","ret":"img","parameter1":"","parameter1Type":"msg","parameter2":"","parameter2Type":"msg","parameter3":"","parameter3Type":"msg","parameter4":"","parameter4Type":"msg","parameter5":"","parameter5Type":"msg","parameter6":"","parameter6Type":"msg","parameter7":"","parameter7Type":"msg","parameter8":"","parameter8Type":"msg","sendProperty":"payload","sendPropertyType":"msg","parameterCount":0,"jimpFunction":"normalize","selectedJimpFunction":{"name":"normalize","fn":"normalize","description":"normalize the channels in an image","parameters":[]},"x":1240,"y":1300,"wires":[["e0f09a91.060498","95378673.9e66c"]]},{"id":"95378673.9e66c","type":"image viewer","z":"8fd4e6f5.2b5","name":"","width":160,"data":"payload","dataType":"msg","x":1590,"y":1380,"wires":[[]]},{"id":"29a1047a.9726c4","type":"chatbot-ask","z":"8fd4e6f5.2b5","name":"","buttons":[],"message":"","x":890,"y":40,"wires":[[]]},{"id":"59e806f6.83084","type":"comment","z":"8fd4e6f5.2b5","name":"–ø–æ–ª—É—á–∏–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫—É","info":"","x":330,"y":500,"wires":[]},{"id":"27dd4eb8.f83c6a","type":"Barcode Decoder","z":"8fd4e6f5.2b5","name":"lol","data":"payload","dataType":"msg","tryharder":"true","tryharderType":"bool","QR_CODE":true,"DATA_MATRIX":false,"PDF_417":false,"EAN_8":false,"EAN_13":false,"CODE_39":false,"CODE_128":false,"ITF":false,"RSS_14":false,"x":1550,"y":1420,"wires":[["c11b4cf.32ae7b"]]},{"id":"cccc9c3f.c12b88","type":"image viewer","z":"8fd4e6f5.2b5","name":"","width":160,"data":"payload","dataType":"msg","x":1550,"y":1500,"wires":[[]]},{"id":"c11b4cf.32ae7b","type":"debug","z":"8fd4e6f5.2b5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1770,"y":1420,"wires":[]},{"id":"f8738091.a97758","type":"Barcode Decoder","z":"c8291d3.ad832e","name":"QR –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ","data":"payload","dataType":"msg","tryharder":"true","tryharderType":"bool","QR_CODE":true,"DATA_MATRIX":false,"PDF_417":false,"EAN_8":false,"EAN_13":false,"CODE_39":false,"CODE_128":false,"ITF":false,"RSS_14":false,"x":640,"y":240,"wires":[[]]},{"id":"d74272f9.dbbeb8","type":"status","z":"c8291d3.ad832e","name":"QR –∫–æ–¥ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω","scope":["f8738091.a97758"],"x":220,"y":440,"wires":[["9e16c5d2.009f9"]]},{"id":"9e16c5d2.009f9","type":"switch","z":"c8291d3.ad832e","name":"","property":"status.text","propertyType":"msg","rules":[{"t":"eq","v":"Not found","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":450,"y":440,"wires":[["8c6f6a03.7c57e"]]},{"id":"cda83f81.eb5fd8","type":"chatbot-telegram-send","z":"8fd4e6f5.2b5","bot":"20f778b0.3b0388","botProduction":"","track":false,"passThrough":false,"errorOutput":false,"outputs":0,"x":890,"y":80,"wires":[]},{"id":"2cbdb6bd.ff8942","type":"change","z":"c8291d3.ad832e","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":360,"wires":[["b229d4ef.393f9"]]},{"id":"8c6f6a03.7c57e","type":"change","z":"c8291d3.ad832e","name":"","rules":[{"t":"set","p":"complete","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":440,"wires":[["b229d4ef.393f9"]]},{"id":"b229d4ef.393f9","type":"function","z":"c8291d3.ad832e","name":"–æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ, –µ—Å–ª–∏ –ø—Ä–∏—à–ª–æ msg.complete","func":"if( msg.reset )\n{\n    context.set('msg_old', msg)\n}\n\nif( msg.complete )\n{\n    msg_old = context.get('msg_old')\n    return msg_old\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":820,"y":360,"wires":[[]]},{"id":"dcfab70f.dd0e1","type":"subflow:c8291d3.ad832e","z":"8fd4e6f5.2b5","name":"","env":[],"x":710,"y":500,"wires":[["f7f28b36.fcd4f","480b4eab.564a08"],["e90d4f4c.f5da"]]},{"id":"ddb09871.3d116","type":"jimp-image","z":"c8291d3.ad832e","name":"","data":"payload","dataType":"msg","ret":"img","parameter1":"","parameter1Type":"msg","parameter2":"","parameter2Type":"msg","parameter3":"","parameter3Type":"msg","parameter4":"","parameter4Type":"msg","parameter5":"","parameter5Type":"msg","parameter6":"","parameter6Type":"msg","parameter7":"","parameter7Type":"msg","parameter8":"","parameter8Type":"msg","sendProperty":"payload","sendPropertyType":"msg","parameterCount":0,"jimpFunction":"greyscale","selectedJimpFunction":{"name":"greyscale","fn":"greyscale","description":"remove colour from the image","parameters":[]},"x":200,"y":240,"wires":[["3ff814d.ebbb8ec"]]},{"id":"3ff814d.ebbb8ec","type":"jimp-image","z":"c8291d3.ad832e","name":"","data":"payload","dataType":"msg","ret":"img","parameter1":"","parameter1Type":"msg","parameter2":"","parameter2Type":"msg","parameter3":"","parameter3Type":"msg","parameter4":"","parameter4Type":"msg","parameter5":"","parameter5Type":"msg","parameter6":"","parameter6Type":"msg","parameter7":"","parameter7Type":"msg","parameter8":"","parameter8Type":"msg","sendProperty":"payload","sendPropertyType":"msg","parameterCount":0,"jimpFunction":"normalize","selectedJimpFunction":{"name":"normalize","fn":"normalize","description":"normalize the channels in an image","parameters":[]},"x":400,"y":240,"wires":[["f8738091.a97758"]]},{"id":"74181af2.0b2134","type":"chatbot-waiting","z":"8fd4e6f5.2b5","waitingType":"","x":1140,"y":180,"wires":[["3d826acf.deefde"]]},{"id":"68405a2c.30ab94","type":"chatbot-parse","z":"8fd4e6f5.2b5","name":"parse image","parseType":"photo","parseVariable":"string","x":530,"y":500,"wires":[["dcfab70f.dd0e1"],[]]},{"id":"480b4eab.564a08","type":"function","z":"8fd4e6f5.2b5","name":"–ø–∞—Ä—Å–µ—Ä —á–µ–∫–∞","func":"var  s = String(msg.payload);\ns = \"t=20180114T124900&s=1663.19&fn=8710000101454543&i=133273&fp=2051176739&n=1\"\n\nmsg.payload = {}\nvar result;\n\nresult = s.match(/(?:^|&)t=(\\d\\d\\d\\d)(\\d\\d)(\\d\\d)T(\\d\\d)(\\d\\d)(\\d\\d)(?:$|&)/);\nif( result ){\n    msg.payload.date = new Date( result[1], result[2]-1, result[3], result[4], result[5], result[6] );\n} else\n    return [null, msg];\n\nresult = s.match(/(?:^|&)s=([\\d\\.]*)(?:$|&)/);\nif( result ){\n    msg.payload.price = result[1]\n} else \n    return [null, msg];\n    \nresult = s.match(/(?:^|&)fn=(\\d*)(?:$|&)/);\nif( result ){\n    msg.payload.fn = result[1]\n} else \n    return [null, msg];\n\nresult = s.match(/(?:^|&)fp=(\\d*)(?:$|&)/);\nif( result ){\n    msg.payload.fp = result[1]\n} else \n    return [null, msg];\n\nresult = s.match(/(?:^|&)i=(\\d*)(?:$|&)/);\nif( result ){\n    msg.payload.fd = result[1]\n} else \n    return [null, msg];\n    \nresult = s.match(/(?:^|&)n=(\\d*)(?:$|&)/);\nif( result ){\n    msg.payload.n = result[1]\n} else \n    return [null, msg];\n\nreturn [msg, null]\n","outputs":2,"noerr":0,"initialize":"","finalize":"","x":890,"y":360,"wires":[["6a95dc16.b39c04"],["271823ed.36c154"]]},{"id":"271823ed.36c154","type":"chatbot-message","z":"8fd4e6f5.2b5","name":"–ø–ª–æ—Ö–æ–π QR-–∫–æ–¥ TODO: fix","message":[{"message":"–ü–æ—Ö–æ–∂–µ, —ç—Ç–æ –Ω–µ—Ä–∞–≤–∏–ª—å–Ω—ã–π QR –∫–æ–¥.\n–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π."}],"language":"none","x":1430,"y":400,"wires":[["3d826acf.deefde"]]},{"id":"91b8321e.9a1d8","type":"chatbot-message","z":"8fd4e6f5.2b5","name":"QR —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω","message":[{"message":" –°–ø–∞—Å–∏–±–æ!\n‚úîÔ∏è –ú—ã –ø–æ–ª—É—á–∏–ª–∏ –≤–∞—à —á–µ–∫ –æ—Ç {{check.day}} {{check.month}} {{check.year}} {{check.hour}}:{{check.minute}}.\n–í—ã —É—á–∞–≤—Å—Ç–≤—É–µ—Ç–µ –≤ —Ä–æ–∑—ã–≥—Ä—ã—à–µ!\n\n–ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π, –Ω–∞—à –º–æ–¥–µ—Ä–∞—Ç–æ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞—à —á–µ–∫‚Ä¶\n–ú—ã –Ω–∞–ø–∏—à–µ–º, –µ—Å–ª–∏ –≤–¥—É–≥ —á—Ç–æ-—Ç–æ –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫."}],"language":"none","x":1400,"y":340,"wires":[["3d826acf.deefde"]]},{"id":"ea1c54a5.edc3e","type":"function","z":"8fd4e6f5.2b5","name":"—Å–æ—Ö—Ä–∞–Ω—è–µ–º —á–µ–∫ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç","func":"const chat = msg.chat();\nPromise.resolve(chat.set({\n  check: msg.payload\n})).then(() => node.send(msg));\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1180,"y":340,"wires":[["91b8321e.9a1d8"]]},{"id":"6a95dc16.b39c04","type":"function","z":"8fd4e6f5.2b5","name":"date to human strings","func":"var monthA = '—è–Ω–≤–∞—Ä—è,—Ñ–µ–≤—Ä–∞–ª—è,–º–∞—Ä—Ç–∞,–∞–ø—Ä–µ–ª—è,–º–∞—è,–∏—é–Ω—è,–∏—é–ª—è,–∞–≤–≥—É—Å—Ç,—Å–µ–Ω—Ç—è–±—Ä—è,–æ–∫—Ç—è–±—Ä—è,–Ω–æ—è–±—Ä—è,–¥–µ–∫–∞–±—Ä—è'.split(',');\n\nmsg.payload.year =  msg.payload.date.getFullYear()\nmsg.payload.month =  monthA[msg.payload.date.getMonth()]\nmsg.payload.day =  msg.payload.date.getDate()\nmsg.payload.hour =  msg.payload.date.getHours()\nmsg.payload.minute =  msg.payload.date.getMinutes()\nmsg.payload.seconds =  msg.payload.date.getSeconds()\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1120,"y":280,"wires":[["ea1c54a5.edc3e"]]}]